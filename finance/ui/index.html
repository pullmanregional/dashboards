<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRH Finance Dashboard</title>
    <link rel="preload" as="image" href="./static/prh-logo.svg" />

    <!-- Prefetch data that dashboards are going to need -->
    <link rel="prefetch" as="fetch" href="/api/data" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body class="min-h-screen">
    <div class="container mx-auto p-4 max-w-6xl">
      <div class="rounded-3xl shadow-2xl backdrop-blur-lg bg-opacity-95 p-8">
        <!-- Header Section -->
        <div class="text-center mb-10">
          <div class="relative flex justify-center mx-auto mb-6">
            <img src="./static/prh-logo.svg" alt="PRH Logo" />

            <!-- User Menu Dropdown -->
            <div class="dropdown dropdown-end absolute right-0 top-0">
              <label tabindex="0" class="btn btn-ghost btn-circle">
                <i class="fas fa-user-circle text-2xl text-base-content/40"></i>
              </label>
              <ul
                tabindex="0"
                class="dropdown-content menu p-2 shadow-lg bg-base-100 rounded-box w-[16rem] mt-1 border border-base-300"
              >
                <div
                  class="px-4 pt-1 pb-2 border-b border-base-300 max-w-[15rem] whitespace-nowrap overflow-hidden"
                >
                  <span
                    id="user-email"
                    class="text-xs font-medium text-base-content/60 select-none block"
                    >Loading...</span
                  >
                </div>
                <li>
                  <a
                    href="/oauth2/sign_out?rd=https%3A%2F%2Flogin.microsoftonline.com%2Fcommon%2Foauth2%2Flogout"
                    class="text-base"
                  >
                    <i class="fas fa-sign-out-alt"></i>
                    Log out
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <h1 class="text-4xl font-bold text-base-content">
            Financial Dashboards
          </h1>
        </div>

        <!-- Cards Container -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Administrative Overview Card. Click anywhere, not just button, to go to dashboard. -->
          <div id="btn-view-admin" class="card shadow-xl">
            <div class="card-body h-full">
              <div class="flex flex-col items-center text-center mb-4">
                <h2 class="card-title text-lg my-3">Administrative Overview</h2>
                <p class="text-base-content/70 text-sm">
                  Income statement, balance sheet, and summary of all
                  departments.
                </p>
              </div>

              <div class="card-actions mt-auto">
                <button class="btn btn-primary btn-block">
                  View Administrative Dashboard
                </button>
              </div>
            </div>
          </div>

          <!-- Departmental Dashboard Card -->
          <div class="card shadow-xl">
            <div class="card-body h-full">
              <div class="flex flex-col items-center text-center mb-4">
                <h2 class="card-title text-lg my-3">By Department</h2>
                <p class="text-base-content/70 text-sm">
                  KPIs, volumes, and productivity data for each departments.
                </p>
              </div>

              <!-- Dropdown and direct link -->
              <div class="flex-grow">
                <div class="dropdown w-full">
                  <!-- Dropdown hint and chevron-->
                  <label
                    tabindex="0"
                    class="btn btn-outline w-full justify-between"
                  >
                    <span id="dept-text">Choose a department...</span>
                    <i class="fas fa-chevron-down"></i>
                  </label>
                  <!-- Dropdown items -->
                  <ul
                    tabindex="0"
                    id="dept-menu"
                    class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-full max-h-60 overflow-y-auto"
                  >
                    <li><a data-value="">Choose a department...</a></li>
                  </ul>
                </div>

                <div class="text-center mt-4">
                  <span id="dept-link-text">&nbsp;</span>
                  <a
                    id="dept-link-url"
                    class="hidden link link-primary text-xs break-all font-mono"
                  ></a>
                </div>
              </div>

              <div class="card-actions mt-4">
                <button
                  id="btn-view-dept"
                  class="btn btn-primary btn-block"
                  disabled
                >
                  View Department Dashboard
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./index.js"></script>
  </body>
</html>
